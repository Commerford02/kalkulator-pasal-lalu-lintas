<!DOCTYPE html>
<html lang="id">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>UU Lalu Lintas</title>
<style>
:root {
  --bg: #f4f4f4;
  --text: #000;
  --card: #fff;
  --border: #999;
  --header: #3399FF;
}
body.dark {
  --bg: #121212;
  --text: #fff;
  --card: #1e1e1e;
  --border: #444;
  --header: #3399FF;
}
body {
  font-family: Arial, Helvetica, sans-serif;
  margin: 0;
  padding: 10px;
  background: var(--bg);
  color: var(--text);
}
h2 { margin-bottom: 5px; font-size: 18px; }
button, input { padding: 4px 8px; margin: 3px 0; border-radius: 4px; border: 1px solid var(--border); font-size: 14px; }
button { cursor: pointer; }
input { width: 200px; }
table {
  width: 100%;
  border-collapse: collapse;
  margin-top: 5px;
  background: var(--card);
  table-layout: fixed;
  font-size: 13px;
}
th, td {
  border: 1px solid var(--border);
  padding: 4px;
  text-align: left;
  word-wrap: break-word;
}
th { background: var(--header); color: #fff; }
/* Kolom PILIH */
#lawTable th:first-child, #lawTable td:first-child {
  width: 120px;          /* Lebar kolom PILIH */
  text-align: center;    /* Horizontal center */
  vertical-align: middle; /* Vertikal center */
}
#lawTable th:nth-child(2), #lawTable td:nth-child(2) {
  width: 60px;           /* Kolom NO PASAL */
  text-align: center;
}
#lawTable input[type="checkbox"] {
  transform: scale(1.5);
  display: block;
  margin: auto;          /* Center checkbox secara horizontal + vertikal */
}
.summary { margin-top: 10px; font-weight: bold; font-size: 14px; }
</style>
</head>
<body>
<h2>UU Lalu Lintas</h2>
<button onclick="toggleMode()">Toggle Dark / Light</button><br>
<input type="text" id="search" placeholder="Search Keterangan Pasal..." onkeyup="filterTable()">

<table id="lawTable">
<thead>
<tr>
<th>PILIH</th>
<th>NO PASAL</th>
<th>KETERANGAN UNDANG UNDANG LALU LINTAS</th>
<th>DENDA ($)</th>
<th>HUKUMAN</th>
</tr>
</thead>
<tbody></tbody>
</table>

<h3>Rekapan Pasal Dipilih</h3>
<button onclick="copyData()">Copy Rekapan</button>
<table id="summaryTable">
<thead>
<tr>
<th>NO PASAL</th>
<th>KETERANGAN</th>
<th>DENDA ($)</th>
<th>HUKUMAN</th>
</tr>
</thead>
<tbody></tbody>
</table>
<div class="summary">
Pasal Dipilih: <span id="selectedCodes">-</span><br>
Total Denda: $<span id="totalDenda">0</span><br>
Total Impound: <span id="totalImpound">0</span> Hari
</div>

<script>
const data = [
["D1","TIDAK MEMILIKI SIM",3500,"SANKSI SOSIAL / IMPOUND 1 HARI"],
["D2","KENDARAAN TANPA PLATE",4000,"IMPOUND 1 HARI"],
["D3","MENGEMUDI TANPA HELM",5000,"SANKSI SOSIAL"],
["D4","MENGHAMBAT PETUGAS INSTANSI",8000,"IMPOUND 2 HARI"],
["D5","KENDARAAN PARKIR SEMBARANGAN",4500,"IMPOUND 1 HARI"],
["D6","KENDARAAN BERADA DI ZONE MERAH / ZONA ILEGAL",7000,"IMPOUND 2 HARI"],
["D7","TIDAK MEMBAYAR PINTU TOL",3500,"SANKSI SOSIAL"],
["D8","MELAWAN ARUS JALAN",5000,"IMPOUND 1 HARI"],
["D9","MENGEMUDI NGEBUT / SPEEDING",6500,"PENARIKAN SIM / IMPOUND 1 HARI"],
["D10","BERKENDARA UGAL-UGALAN",4000,"PENARIKAN SIM / IMPOUND 2 HARI"],
["D11","KABUR SAAT RAZIA",5000,"IMPOUND 1 HARI"],
["D12","BALAPAN LIAR / ILEGAL",7000,"IMPOUND 2 HARI"],
["D13","KENDARAAN BERADA DI TKP PEPERANGAN",6000,"IMPOUND 3 HARI"],
["D14","TERDAPAT BARANG ILEGAL DI KENDARAAN",5000,"IMPOUND 2 HARI"],
["D15","TERDAPAT SENJATA DI KENDARAAN",7000,"IMPOUND 3 HARI"],
["D16","MENGHALANGI PETUGAS POLISI (PENGEJARAN)",6500,"PENARIKAN SIM / IMPOUND 1 HARI"],
["D17","MENGHAMBAT ARUS LALU LINTAS",4500,"SANKSI SOSIAL"],
["D18","KABUR SAAT DI HENTIKAN",5000,"PENARIKAN SIM / IMPOUND 1 HARI"],
["D19","BERHENTI DI JALUR CEPAT / TOL TANPA ALASAN YANG JELAS",5000,"SANKSI SOSIAL"],
["D20","KENDARAAN MILIK SUSPECT",8000,"IMPOUND 3 HARI"]
];

const tbody = document.querySelector("#lawTable tbody");
const summaryBody = document.querySelector("#summaryTable tbody");
const searchInput = document.getElementById("search");

function renderTable() {
  tbody.innerHTML = "";
  data.forEach((row, i) => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td><input type='checkbox' data-index='${i}'></td>
      <td>${row[0]}</td>
      <td>${row[1]}</td>
      <td>$${row[2]}</td>
      <td>${row[3]}</td>
    `;
    tbody.appendChild(tr);
  });
}

function updateSummary() {
  summaryBody.innerHTML = "";
  let totalDenda = 0;
  let totalImpound = 0;
  let codes = [];
  document.querySelectorAll("#lawTable input:checked").forEach(cb => {
    const row = data[cb.dataset.index];
    codes.push(row[0]);
    totalDenda += row[2];
    const match = row[3].match(/IMPOUND (\d+)/i);
    if(match) totalImpound += parseInt(match[1]);
    const tr = document.createElement("tr");
    tr.innerHTML = `<td>${row[0]}</td><td>${row[1]}</td><td>$${row[2]}</td><td>${row[3]}</td>`;
    summaryBody.appendChild(tr);
  });
  document.getElementById("selectedCodes").innerText = codes.length ? codes.join(" ") : "-";
  document.getElementById("totalDenda").innerText = totalDenda;
  document.getElementById("totalImpound").innerText = totalImpound;
}

function filterTable() {
  const value = searchInput.value.toLowerCase();
  document.querySelectorAll("#lawTable tbody tr").forEach(tr => {
    const keterangan = tr.children[2].innerText.toLowerCase();
    tr.style.display = keterangan.includes(value) ? "" : "none";
  });
}

function toggleMode() { document.body.classList.toggle("dark"); }

function copyData() {
  let text = "";
  document.querySelectorAll("#summaryTable tbody tr").forEach(tr => {
    const cols = tr.children;
    text += cols[0].innerText + " " + cols[2].innerText + " " + cols[3].innerText + "\n";
  });
  navigator.clipboard.writeText(text);
  alert("Rekapan berhasil di copy");
}

searchInput.addEventListener("keyup", filterTable);
document.addEventListener("change", e => {
  if(e.target.matches("#lawTable input[type='checkbox']")) updateSummary();
});
renderTable();
</script>
</body>
</html>
